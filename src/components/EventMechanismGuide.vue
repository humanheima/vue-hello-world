<!-- JavaScript äº‹ä»¶æœºåˆ¶å®Œæ•´æŒ‡å— -->
<template>
    <div class="event-mechanism-guide">
        <div class="guide-header">
            <h1>ğŸª JavaScript äº‹ä»¶æœºåˆ¶å®Œæ•´æŒ‡å—</h1>
            <p>æ·±å…¥ç†è§£DOMäº‹ä»¶çš„å·¥ä½œåŸç†ï¼šäº‹ä»¶æµã€å†’æ³¡ã€æ•è·ã€é»˜è®¤è¡Œä¸ºç­‰æ ¸å¿ƒæ¦‚å¿µ</p>
        </div>

        <!-- äº‹ä»¶æµåŸºç¡€æ¦‚å¿µ -->
        <section class="concept-section">
            <h2>ğŸ“š äº‹ä»¶æµåŸºç¡€æ¦‚å¿µ</h2>

            <div class="concept-card">
                <h3>ä»€ä¹ˆæ˜¯äº‹ä»¶æµï¼Ÿ</h3>
                <p>äº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚å½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå®ƒä¼šæŒ‰ç…§ç‰¹å®šçš„æµç¨‹åœ¨DOMæ ‘ä¸­ä¼ æ’­ã€‚</p>

                <div class="flow-diagram">
                    <div class="phase capture">
                        <h4>1. æ•è·é˜¶æ®µ (Capture Phase)</h4>
                        <p>äº‹ä»¶ä»æ ¹å…ƒç´ å¼€å§‹ï¼Œå‘ä¸‹ä¼ æ’­åˆ°ç›®æ ‡å…ƒç´ </p>
                        <div class="arrow-down">â†“</div>
                    </div>

                    <div class="phase target">
                        <h4>2. ç›®æ ‡é˜¶æ®µ (Target Phase)</h4>
                        <p>äº‹ä»¶åˆ°è¾¾ç›®æ ‡å…ƒç´ ï¼Œæ‰§è¡Œç›®æ ‡å…ƒç´ çš„äº‹ä»¶å¤„ç†å‡½æ•°</p>
                        <div class="arrow-down">â†“</div>
                    </div>

                    <div class="phase bubble">
                        <h4>3. å†’æ³¡é˜¶æ®µ (Bubble Phase)</h4>
                        <p>äº‹ä»¶ä»ç›®æ ‡å…ƒç´ å¼€å§‹ï¼Œå‘ä¸Šå†’æ³¡åˆ°æ ¹å…ƒç´ </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- äº‹ä»¶å†’æ³¡æ¼”ç¤º -->
        <section class="demo-section">
            <h2>ğŸ«§ äº‹ä»¶å†’æ³¡æœºåˆ¶æ¼”ç¤º</h2>

            <div class="demo-container">
                <div class="explanation">
                    <p><strong>äº‹ä»¶å†’æ³¡ï¼š</strong>å½“å­å…ƒç´ è§¦å‘äº‹ä»¶æ—¶ï¼Œè¯¥äº‹ä»¶ä¼šé€çº§å‘ä¸Šä¼ æ’­åˆ°æ‰€æœ‰çˆ¶å…ƒç´ ã€‚</p>
                    <p><strong>å®éªŒï¼š</strong>ç‚¹å‡»ä¸‹æ–¹ä¸åŒçš„åµŒå¥—å±‚çº§ï¼Œè§‚å¯Ÿäº‹ä»¶è§¦å‘çš„é¡ºåºã€‚</p>
                </div>

                <div class="bubble-demo-wrapper">
                    <div class="bubble-container level-1" @click="handleLevel1Click">
                        <span class="level-label">Level 1 (ç¥–çˆ¶å…ƒç´ )</span>
                        <div class="bubble-container level-2" @click="handleLevel2Click">
                            <span class="level-label">Level 2 (çˆ¶å…ƒç´ )</span>
                            <div class="bubble-container level-3" @click="handleLevel3Click">
                                <span class="level-label">Level 3 (å­å…ƒç´ )</span>
                                <button class="bubble-button" @click="handleButtonClick">
                                    ç‚¹å‡»æˆ‘ (æŒ‰é’®)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="event-log">
                    <h4>ğŸ“‹ äº‹ä»¶è§¦å‘æ—¥å¿—</h4>
                    <div class="log-display">
                        <div v-for="(log, index) in eventLogs" :key="index" class="log-entry" :class="log.type">
                            <span class="log-order">{{ index + 1 }}.</span>
                            <span class="log-message">{{ log.message }}</span>
                            <span class="log-time">{{ log.time }}</span>
                        </div>
                        <div v-if="eventLogs.length === 0" class="no-logs">
                            ç‚¹å‡»ä¸Šæ–¹çš„ä»»æ„åŒºåŸŸæŸ¥çœ‹äº‹ä»¶å†’æ³¡è¿‡ç¨‹
                        </div>
                    </div>
                    <button @click="clearLogs" class="clear-btn">æ¸…ç©ºæ—¥å¿—</button>
                </div>
            </div>
        </section>

        <!-- é˜»æ­¢å†’æ³¡æ¼”ç¤º -->
        <section class="demo-section">
            <h2>ğŸ›‘ é˜»æ­¢äº‹ä»¶å†’æ³¡æ¼”ç¤º</h2>

            <div class="demo-container">
                <div class="explanation">
                    <p><strong>stopPropagation()ï¼š</strong>é˜»æ­¢äº‹ä»¶ç»§ç»­å‘ä¸Šå†’æ³¡ï¼Œä½†ä¸å½±å“åŒçº§å…ƒç´ çš„äº‹ä»¶ç›‘å¬å™¨ã€‚</p>
                    <p><strong>å¯¹æ¯”å®éªŒï¼š</strong>å·¦ä¾§æ­£å¸¸å†’æ³¡ï¼Œå³ä¾§é˜»æ­¢å†’æ³¡ã€‚</p>
                </div>

                <div class="comparison-demo">
                    <!-- æ­£å¸¸å†’æ³¡ -->
                    <div class="demo-side">
                        <h4>æ­£å¸¸å†’æ³¡</h4>
                        <div class="bubble-container level-1" @click="handleNormalOuter">
                            å¤–å±‚ (ç‚¹å‡»æˆ‘)
                            <div class="bubble-container level-2" @click="handleNormalMiddle">
                                ä¸­å±‚ (ç‚¹å‡»æˆ‘)
                                <button @click="handleNormalInner" class="demo-button">
                                    å†…å±‚æŒ‰é’®
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- é˜»æ­¢å†’æ³¡ -->
                    <div class="demo-side">
                        <h4>é˜»æ­¢å†’æ³¡</h4>
                        <div class="bubble-container level-1" @click="handleStopOuter">
                            å¤–å±‚ (ç‚¹å‡»æˆ‘)
                            <div class="bubble-container level-2" @click="handleStopMiddle">
                                ä¸­å±‚ (ç‚¹å‡»æˆ‘)
                                <button @click.stop="handleStopInner" class="demo-button stop-bubble">
                                    å†…å±‚æŒ‰é’® (.stop)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="code-example">
                    <h4>ğŸ’¡ ä»£ç å¯¹æ¯”</h4>
                    <div class="code-comparison">
                        <div class="code-block">
                            <h5>æ­£å¸¸å†’æ³¡</h5>
                            <pre><code>&lt;button @click="handleClick"&gt;
  æ™®é€šæŒ‰é’®
&lt;/button&gt;</code></pre>
                        </div>
                        <div class="code-block">
                            <h5>é˜»æ­¢å†’æ³¡</h5>
                            <pre><code>&lt;button @click.stop="handleClick"&gt;
  é˜»æ­¢å†’æ³¡æŒ‰é’®
&lt;/button&gt;

// æˆ–è€…åœ¨æ–¹æ³•ä¸­
handleClick(event) {
  event.stopPropagation();
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- é˜»æ­¢é»˜è®¤è¡Œä¸ºæ¼”ç¤º -->
        <section class="demo-section">
            <h2>ğŸš« é˜»æ­¢é»˜è®¤è¡Œä¸ºæ¼”ç¤º</h2>

            <div class="demo-container">
                <div class="explanation">
                    <p><strong>preventDefault()ï¼š</strong>é˜»æ­¢å…ƒç´ çš„é»˜è®¤è¡Œä¸ºï¼Œå¦‚é“¾æ¥è·³è½¬ã€è¡¨å•æäº¤ã€å³é”®èœå•ç­‰ã€‚</p>
                    <p><strong>å¸¸è§åœºæ™¯ï¼š</strong>è‡ªå®šä¹‰è¡¨å•éªŒè¯ã€é˜²æ­¢æ„å¤–è·³è½¬ã€å®ç°SPAè·¯ç”±ç­‰ã€‚</p>
                </div>

                <!-- é“¾æ¥è·³è½¬æ¼”ç¤º -->
                <div class="prevent-demo-group">
                    <h4>ğŸ”— é“¾æ¥è·³è½¬è¡Œä¸º</h4>
                    <div class="demo-row">
                        <a href="https://vuejs.org" target="_blank" class="demo-link normal">
                            æ™®é€šé“¾æ¥ (ä¼šè·³è½¬åˆ°Vueå®˜ç½‘)
                        </a>
                        <a href="https://vuejs.org" @click.prevent="handlePreventLink" class="demo-link prevented">
                            é˜»æ­¢è·³è½¬é“¾æ¥ (.prevent)
                        </a>
                    </div>
                </div>

                <!-- è¡¨å•æäº¤æ¼”ç¤º -->
                <div class="prevent-demo-group">
                    <h4>ğŸ“ è¡¨å•æäº¤è¡Œä¸º</h4>
                    <div class="form-demo-row">
                        <form @submit="handleNormalSubmit" class="demo-form">
                            <h5>æ™®é€šè¡¨å• (ä¼šåˆ·æ–°é¡µé¢)</h5>
                            <input v-model="normalFormData" placeholder="è¾“å…¥å†…å®¹" class="form-input">
                            <button type="submit" class="submit-btn">æäº¤</button>
                        </form>

                        <form @submit.prevent="handlePreventSubmit" class="demo-form">
                            <h5>é˜»æ­¢é»˜è®¤æäº¤ (.prevent)</h5>
                            <input v-model="preventFormData" placeholder="è¾“å…¥å†…å®¹" class="form-input">
                            <button type="submit" class="submit-btn prevented">æäº¤</button>
                        </form>
                    </div>
                </div>

                <!-- å³é”®èœå•æ¼”ç¤º -->
                <div class="prevent-demo-group">
                    <h4>ğŸ–±ï¸ å³é”®èœå•è¡Œä¸º</h4>
                    <div class="demo-row">
                        <div class="context-demo normal" @contextmenu="handleNormalContext">
                            å³é”®ç‚¹å‡»æˆ‘ (æ˜¾ç¤ºç³»ç»Ÿèœå•)
                        </div>
                        <div class="context-demo prevented" @contextmenu.prevent="handlePreventContext">
                            å³é”®ç‚¹å‡»æˆ‘ (é˜»æ­¢ç³»ç»Ÿèœå•)
                        </div>
                    </div>
                </div>

                <!-- é”®ç›˜äº‹ä»¶æ¼”ç¤º -->
                <div class="prevent-demo-group">
                    <h4>âŒ¨ï¸ é”®ç›˜é»˜è®¤è¡Œä¸º</h4>
                    <div class="demo-row">
                        <input v-model="normalKeyInput" @keydown="handleNormalKeydown" placeholder="æ™®é€šè¾“å…¥æ¡† (æŒ‰Tabé”®ä¼šå¤±ç„¦)"
                            class="key-input normal">
                        <input v-model="preventKeyInput" @keydown.tab.prevent="handlePreventTab"
                            placeholder="é˜»æ­¢Tabé»˜è®¤è¡Œä¸ºçš„è¾“å…¥æ¡†" class="key-input prevented">
                    </div>
                </div>
            </div>
        </section>

        <!-- äº‹ä»¶æ•è·æ¼”ç¤º -->
        <section class="demo-section">
            <h2>ğŸ“¥ äº‹ä»¶æ•è·æœºåˆ¶æ¼”ç¤º</h2>

            <div class="demo-container">
                <div class="explanation">
                    <p><strong>äº‹ä»¶æ•è·ï¼š</strong>ä¸å†’æ³¡ç›¸åï¼Œäº‹ä»¶ä»æ ¹å…ƒç´ å‘ç›®æ ‡å…ƒç´ ä¼ æ’­ã€‚</p>
                    <p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong>éœ€è¦åœ¨çˆ¶å…ƒç´ ä¸­æå‰æ‹¦æˆªå­å…ƒç´ äº‹ä»¶æ—¶ä½¿ç”¨ã€‚</p>
                </div>

                <div class="capture-demo-wrapper">
                    <div class="capture-container outer" @click.capture="handleCaptureOuter">
                        <span class="capture-label">å¤–å±‚ (æ•è·æ¨¡å¼)</span>
                        <div class="capture-container middle" @click.capture="handleCaptureMiddle">
                            <span class="capture-label">ä¸­å±‚ (æ•è·æ¨¡å¼)</span>
                            <button @click="handleCaptureTarget" class="capture-button">
                                ç›®æ ‡æŒ‰é’® (å†’æ³¡æ¨¡å¼)
                            </button>
                        </div>
                    </div>
                </div>

                <div class="capture-explanation">
                    <h4>ğŸ” æ•è· vs å†’æ³¡æ‰§è¡Œé¡ºåº</h4>
                    <div class="order-demo">
                        <div class="order-item capture-order">
                            <strong>æ•è·é˜¶æ®µï¼š</strong>å¤–å±‚ â†’ ä¸­å±‚ â†’ ç›®æ ‡
                        </div>
                        <div class="order-item bubble-order">
                            <strong>å†’æ³¡é˜¶æ®µï¼š</strong>ç›®æ ‡ â†’ ä¸­å±‚ â†’ å¤–å±‚
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- äº‹ä»¶å§”æ‰˜æ¼”ç¤º -->
        <section class="demo-section">
            <h2>ğŸ“‹ äº‹ä»¶å§”æ‰˜æ¼”ç¤º</h2>

            <div class="demo-container">
                <div class="explanation">
                    <p><strong>äº‹ä»¶å§”æ‰˜ï¼š</strong>åˆ©ç”¨äº‹ä»¶å†’æ³¡æœºåˆ¶ï¼Œåœ¨çˆ¶å…ƒç´ ä¸Šç›‘å¬å­å…ƒç´ çš„äº‹ä»¶ã€‚</p>
                    <p><strong>ä¼˜åŠ¿ï¼š</strong>å‡å°‘å†…å­˜å ç”¨ï¼ŒåŠ¨æ€æ·»åŠ çš„å…ƒç´ è‡ªåŠ¨å…·æœ‰äº‹ä»¶å¤„ç†èƒ½åŠ›ã€‚</p>
                </div>

                <div class="delegation-demo">
                    <div class="todo-app">
                        <h4>ğŸ“ å¾…åŠäº‹é¡¹åˆ—è¡¨ (äº‹ä»¶å§”æ‰˜æ¼”ç¤º)</h4>
                        <div class="add-todo">
                            <input v-model="newTodo" @keyup.enter="addTodo" placeholder="è¾“å…¥æ–°å¾…åŠäº‹é¡¹" class="todo-input">
                            <button @click="addTodo" class="add-btn">æ·»åŠ </button>
                        </div>

                        <!-- äº‹ä»¶å§”æ‰˜ï¼šåªåœ¨ulä¸Šç»‘å®šä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ -->
                        <ul class="todo-list" @click="handleTodoClick">
                            <li v-for="todo in todos" :key="todo.id" class="todo-item" :data-id="todo.id">
                                <span class="todo-text" :class="{ completed: todo.completed }">{{ todo.text }}</span>
                                <div class="todo-actions">
                                    <button class="toggle-btn" :class="{ active: todo.completed }">
                                        {{ todo.completed ? 'âœ…' : 'â­•' }}
                                    </button>
                                    <button class="delete-btn">ğŸ—‘ï¸</button>
                                </div>
                            </li>
                        </ul>

                        <div class="delegation-info">
                            <p><strong>ğŸ’¡ å®ç°åŸç†ï¼š</strong></p>
                            <ul>
                                <li>åªåœ¨ &lt;ul&gt; å…ƒç´ ä¸Šç»‘å®šä¸€ä¸ª click äº‹ä»¶ç›‘å¬å™¨</li>
                                <li>é€šè¿‡ event.target åˆ¤æ–­å®é™…ç‚¹å‡»çš„å…ƒç´ </li>
                                <li>æ ¹æ®ç‚¹å‡»ç›®æ ‡çš„ç±»åæ‰§è¡Œä¸åŒæ“ä½œ</li>
                                <li>æ–°å¢çš„ &lt;li&gt; å…ƒç´ è‡ªåŠ¨å…·æœ‰ç‚¹å‡»åŠŸèƒ½</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- å®ç”¨æŠ€å·§æ€»ç»“ -->
        <section class="summary-section">
            <h2>ğŸ’ å®ç”¨æŠ€å·§æ€»ç»“</h2>

            <div class="tips-grid">
                <div class="tip-card">
                    <h4>ğŸ¯ ä½•æ—¶é˜»æ­¢å†’æ³¡</h4>
                    <ul>
                        <li>æ¨¡æ€æ¡†å†…å®¹åŒºåŸŸç‚¹å‡»</li>
                        <li>ä¸‹æ‹‰èœå•é¡¹ç›®ç‚¹å‡»</li>
                        <li>åµŒå¥—å¯ç‚¹å‡»å…ƒç´ </li>
                        <li>é˜²æ­¢çˆ¶çº§äº‹ä»¶å¹²æ‰°</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <h4>ğŸš« ä½•æ—¶é˜»æ­¢é»˜è®¤è¡Œä¸º</h4>
                    <ul>
                        <li>è‡ªå®šä¹‰è¡¨å•éªŒè¯</li>
                        <li>SPAè·¯ç”±æ‹¦æˆª</li>
                        <li>è‡ªå®šä¹‰å³é”®èœå•</li>
                        <li>æ‹–æ‹½æ“ä½œå®ç°</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <h4>âš¡ æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h4>
                    <ul>
                        <li>ä½¿ç”¨äº‹ä»¶å§”æ‰˜å‡å°‘ç›‘å¬å™¨</li>
                        <li>åˆç†ä½¿ç”¨ passive ç›‘å¬å™¨</li>
                        <li>åŠæ—¶ç§»é™¤ä¸éœ€è¦çš„ç›‘å¬å™¨</li>
                        <li>é¿å…åœ¨äº‹ä»¶å¤„ç†ä¸­è¿›è¡Œé‡è®¡ç®—</li>
                    </ul>
                </div>

                <div class="tip-card">
                    <h4>ğŸ”§ è°ƒè¯•æŠ€å·§</h4>
                    <ul>
                        <li>ä½¿ç”¨ console.log(event) æŸ¥çœ‹äº‹ä»¶å¯¹è±¡</li>
                        <li>æ£€æŸ¥ event.target å’Œ event.currentTarget</li>
                        <li>ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„äº‹ä»¶ç›‘å¬å™¨é¢æ¿</li>
                        <li>æ·»åŠ ä¸´æ—¶çš„äº‹ä»¶ç›‘å¬å™¨è¿›è¡Œæµ‹è¯•</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
</template>

<script>
export default {
    name: 'EventMechanismGuide',
    data() {
        return {
            // äº‹ä»¶æ—¥å¿—
            eventLogs: [],

            // è¡¨å•æ•°æ®
            normalFormData: '',
            preventFormData: '',

            // é”®ç›˜è¾“å…¥æ•°æ®
            normalKeyInput: '',
            preventKeyInput: '',

            // å¾…åŠäº‹é¡¹æ•°æ®
            newTodo: '',
            todos: [
                { id: 1, text: 'å­¦ä¹ äº‹ä»¶å†’æ³¡æœºåˆ¶', completed: false },
                { id: 2, text: 'ç†è§£äº‹ä»¶å§”æ‰˜åŸç†', completed: true },
                { id: 3, text: 'å®è·µé˜»æ­¢é»˜è®¤è¡Œä¸º', completed: false }
            ],
            todoIdCounter: 4
        }
    },
    methods: {
        // æ·»åŠ æ—¥å¿—æ–¹æ³•
        addLog(message, type = 'normal') {
            const now = new Date();
            this.eventLogs.unshift({
                message,
                type,
                time: now.toLocaleTimeString()
            });

            // é™åˆ¶æ—¥å¿—æ•°é‡
            if (this.eventLogs.length > 8) {
                this.eventLogs.pop();
            }
        },

        clearLogs() {
            this.eventLogs = [];
        },

        // äº‹ä»¶å†’æ³¡æ¼”ç¤ºæ–¹æ³•
        handleLevel1Click() {
            this.addLog('ğŸ”µ Level 1 (ç¥–çˆ¶å…ƒç´ ) äº‹ä»¶è§¦å‘', 'level1');
        },

        handleLevel2Click() {
            this.addLog('ğŸŸ¡ Level 2 (çˆ¶å…ƒç´ ) äº‹ä»¶è§¦å‘', 'level2');
        },

        handleLevel3Click() {
            this.addLog('ğŸŸ  Level 3 (å­å…ƒç´ ) äº‹ä»¶è§¦å‘', 'level3');
        },

        handleButtonClick() {
            this.addLog('ğŸ”´ Button (æŒ‰é’®) äº‹ä»¶è§¦å‘', 'button');
        },

        // é˜»æ­¢å†’æ³¡å¯¹æ¯”æ¼”ç¤º
        handleNormalOuter() {
            this.addLog('ğŸ”µ æ­£å¸¸å†’æ³¡ - å¤–å±‚å®¹å™¨');
        },

        handleNormalMiddle() {
            this.addLog('ğŸŸ¡ æ­£å¸¸å†’æ³¡ - ä¸­å±‚å®¹å™¨');
        },

        handleNormalInner() {
            this.addLog('ğŸ”´ æ­£å¸¸å†’æ³¡ - å†…å±‚æŒ‰é’®');
        },

        handleStopOuter() {
            this.addLog('ğŸ”µ é˜»æ­¢å†’æ³¡ - å¤–å±‚å®¹å™¨');
        },

        handleStopMiddle() {
            this.addLog('ğŸŸ¡ é˜»æ­¢å†’æ³¡ - ä¸­å±‚å®¹å™¨');
        },

        handleStopInner() {
            this.addLog('ğŸ›‘ é˜»æ­¢å†’æ³¡ - å†…å±‚æŒ‰é’® (å·²é˜»æ­¢å†’æ³¡)');
        },

        // é˜»æ­¢é»˜è®¤è¡Œä¸ºæ¼”ç¤º
        handlePreventLink() {
            this.addLog('ğŸš« é“¾æ¥è·³è½¬å·²è¢«é˜»æ­¢');
        },

        handleNormalSubmit() {
            this.addLog(`ğŸ“ æ™®é€šè¡¨å•æäº¤: ${this.normalFormData} (é¡µé¢å°†åˆ·æ–°)`);
        },

        handlePreventSubmit() {
            this.addLog(`âœ… é˜»æ­¢é»˜è®¤æäº¤: ${this.preventFormData} (é¡µé¢ä¸ä¼šåˆ·æ–°)`);
        },

        handleNormalContext() {
            this.addLog('ğŸ–±ï¸ æ˜¾ç¤ºç³»ç»Ÿå³é”®èœå•');
        },

        handlePreventContext() {
            this.addLog('ğŸš« é˜»æ­¢ç³»ç»Ÿå³é”®èœå•æ˜¾ç¤º');
        },

        handleNormalKeydown(event) {
            if (event.key === 'Tab') {
                this.addLog('âŒ¨ï¸ Tabé”®é»˜è®¤è¡Œä¸º (ç„¦ç‚¹å°†è½¬ç§»)');
            }
        },

        handlePreventTab() {
            this.addLog('ğŸš« é˜»æ­¢Tabé”®é»˜è®¤è¡Œä¸º (ç„¦ç‚¹ä¸ä¼šè½¬ç§»)');
        },

        // äº‹ä»¶æ•è·æ¼”ç¤º
        handleCaptureOuter() {
            this.addLog('ğŸ“¥ æ•è·é˜¶æ®µ - å¤–å±‚å®¹å™¨');
        },

        handleCaptureMiddle() {
            this.addLog('ğŸ“¥ æ•è·é˜¶æ®µ - ä¸­å±‚å®¹å™¨');
        },

        handleCaptureTarget() {
            this.addLog('ğŸ¯ ç›®æ ‡é˜¶æ®µ - ç›®æ ‡æŒ‰é’®');
        },

        // äº‹ä»¶å§”æ‰˜æ¼”ç¤º
        addTodo() {
            if (this.newTodo.trim()) {
                this.todos.push({
                    id: this.todoIdCounter++,
                    text: this.newTodo.trim(),
                    completed: false
                });
                this.newTodo = '';
                this.addLog(`â• æ·»åŠ æ–°å¾…åŠ: ${this.todos[this.todos.length - 1].text}`);
            }
        },

        handleTodoClick(event) {
            const target = event.target;

            //closest() æ–¹æ³•ä¼šä»å½“å‰å…ƒç´ å¼€å§‹ï¼Œå‘ä¸Šéå†DOMæ ‘ï¼ŒæŸ¥æ‰¾åŒ¹é…æŒ‡å®šCSSé€‰æ‹©å™¨çš„ç¬¬ä¸€ä¸ªç¥–å…ˆå…ƒç´ ï¼ˆåŒ…æ‹¬å…ƒç´ è‡ªèº«ï¼‰ã€‚
            const todoItem = target.closest('.todo-item');

            if (!todoItem) return;

            const todoId = parseInt(todoItem.dataset.id);
            const todo = this.todos.find(t => t.id === todoId);

            if (target.classList.contains('toggle-btn')) {
                // åˆ‡æ¢å®ŒæˆçŠ¶æ€
                todo.completed = !todo.completed;
                this.addLog(`${todo.completed ? 'âœ…' : 'â­•'} åˆ‡æ¢å¾…åŠçŠ¶æ€: ${todo.text}`);
            } else if (target.classList.contains('delete-btn')) {
                // åˆ é™¤å¾…åŠ
                const index = this.todos.findIndex(t => t.id === todoId);
                this.todos.splice(index, 1);
                this.addLog(`ğŸ—‘ï¸ åˆ é™¤å¾…åŠ: ${todo.text}`);
            }
        }
    },

    mounted() {
        this.addLog('ğŸ“š äº‹ä»¶æœºåˆ¶æŒ‡å—ç»„ä»¶å·²åŠ è½½');
    }
}
</script>

<style scoped>
.event-mechanism-guide {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    font-family: 'Arial', sans-serif;
    line-height: 1.6;
}

/* å¤´éƒ¨æ ·å¼ */
.guide-header {
    text-align: center;
    margin-bottom: 40px;
    padding: 40px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 15px;
}

.guide-header h1 {
    font-size: 2.5em;
    margin-bottom: 15px;
    font-weight: bold;
}

.guide-header p {
    font-size: 1.2em;
    opacity: 0.95;
}

/* åŒºå—æ ·å¼ */
.concept-section,
.demo-section,
.summary-section {
    margin-bottom: 50px;
}

.concept-section h2,
.demo-section h2,
.summary-section h2 {
    font-size: 2em;
    color: #2c3e50;
    margin-bottom: 25px;
    padding-left: 15px;
    border-left: 5px solid #3498db;
}

/* æ¦‚å¿µå¡ç‰‡ */
.concept-card {
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    border: 1px solid #e1e8ed;
}

.concept-card h3 {
    color: #2c3e50;
    margin-bottom: 15px;
    font-size: 1.5em;
}

.concept-card p {
    color: #666;
    margin-bottom: 25px;
}

/* äº‹ä»¶æµå›¾è¡¨ */
.flow-diagram {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-top: 20px;
}

.phase {
    flex: 1;
    text-align: center;
    padding: 20px;
    margin: 0 10px;
    border-radius: 10px;
}

.phase.capture {
    background: linear-gradient(135deg, #74b9ff, #0984e3);
    color: white;
}

.phase.target {
    background: linear-gradient(135deg, #fd79a8, #e84393);
    color: white;
}

.phase.bubble {
    background: linear-gradient(135deg, #fdcb6e, #e17055);
    color: white;
}

.phase h4 {
    margin-bottom: 10px;
    font-size: 1.1em;
}

.arrow-down {
    font-size: 2em;
    margin-top: 10px;
    opacity: 0.8;
}

/* æ¼”ç¤ºå®¹å™¨ */
.demo-container {
    background: white;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    border: 1px solid #e1e8ed;
}

.explanation {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    border-left: 4px solid #17a2b8;
    margin-bottom: 25px;
}

.explanation p {
    margin: 8px 0;
    color: #495057;
}

/* å†’æ³¡æ¼”ç¤º */
.bubble-demo-wrapper {
    margin: 25px 0;
    display: flex;
    justify-content: center;
}

.bubble-container {
    padding: 20px;
    margin: 10px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    min-height: 60px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.level-1 {
    background: linear-gradient(135deg, #74b9ff, #0984e3);
    color: white;
    padding: 30px;
    min-width: 400px;
    min-height: 300px;
}

.level-2 {
    background: linear-gradient(135deg, #fdcb6e, #f39c12);
    color: white;
    padding: 25px;
    min-width: 300px;
    min-height: 200px;
}

.level-3 {
    background: linear-gradient(135deg, #fd79a8, #e84393);
    color: white;
    padding: 20px;
    min-width: 200px;
    min-height: 120px;
}

.level-label {
    position: absolute;
    top: 10px;
    left: 15px;
    font-weight: bold;
    font-size: 0.9em;
    opacity: 0.9;
}

.bubble-button {
    background: #fff;
    color: #333;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.2s ease;
}

.bubble-button:hover {
    background: #f8f9fa;
    transform: translateY(-2px);
}

/* äº‹ä»¶æ—¥å¿— */
.event-log {
    margin-top: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.event-log h4 {
    color: #495057;
    margin-bottom: 15px;
}

.log-display {
    max-height: 300px;
    overflow-y: auto;
    background: white;
    padding: 15px;
    border-radius: 5px;
    border: 1px solid #dee2e6;
    margin-bottom: 15px;
}

.log-entry {
    display: flex;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid #f1f3f4;
    font-size: 0.9em;
}

.log-entry:last-child {
    border-bottom: none;
}

.log-order {
    min-width: 25px;
    color: #6c757d;
    font-weight: bold;
}

.log-message {
    flex: 1;
    margin: 0 15px;
}

.log-time {
    color: #6c757d;
    font-size: 0.8em;
}

.log-entry.level1 {
    border-left: 4px solid #74b9ff;
}

.log-entry.level2 {
    border-left: 4px solid #fdcb6e;
}

.log-entry.level3 {
    border-left: 4px solid #fd79a8;
}

.log-entry.button {
    border-left: 4px solid #00b894;
}

.no-logs {
    text-align: center;
    color: #6c757d;
    font-style: italic;
    padding: 30px;
}

.clear-btn {
    background: #6c757d;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9em;
}

.clear-btn:hover {
    background: #5a6268;
}

/* å¯¹æ¯”æ¼”ç¤º */
.comparison-demo {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin: 25px 0;
}

.demo-side h4 {
    text-align: center;
    color: #495057;
    margin-bottom: 15px;
}

.demo-button {
    background: #007bff;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
    margin: 5px;
}

.demo-button.stop-bubble {
    background: #dc3545;
}

/* ä»£ç ç¤ºä¾‹ */
.code-example {
    margin-top: 30px;
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
}

.code-comparison {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.code-block {
    background: white;
    padding: 15px;
    border-radius: 5px;
    border: 1px solid #dee2e6;
}

.code-block h5 {
    color: #495057;
    margin-bottom: 10px;
}

.code-block pre {
    background: #2d3748;
    color: #e2e8f0;
    padding: 15px;
    border-radius: 4px;
    overflow-x: auto;
    font-size: 0.9em;
}

/* é˜»æ­¢é»˜è®¤è¡Œä¸ºæ¼”ç¤º */
.prevent-demo-group {
    margin: 30px 0;
    padding: 25px;
    background: #f8f9fa;
    border-radius: 10px;
}

.prevent-demo-group h4 {
    color: #495057;
    margin-bottom: 20px;
}

.demo-row {
    display: flex;
    gap: 20px;
    align-items: center;
    margin: 15px 0;
}

.demo-link {
    display: inline-block;
    padding: 12px 24px;
    text-decoration: none;
    border-radius: 6px;
    transition: all 0.3s ease;
    font-weight: 500;
}

.demo-link.normal {
    background: #007bff;
    color: white;
}

.demo-link.prevented {
    background: #dc3545;
    color: white;
}

.demo-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* è¡¨å•æ¼”ç¤º */
.form-demo-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
    margin: 20px 0;
}

.demo-form {
    padding: 20px;
    background: white;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.demo-form h5 {
    color: #495057;
    margin-bottom: 15px;
}

.form-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    margin-bottom: 10px;
}

.submit-btn {
    background: #28a745;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    cursor: pointer;
}

.submit-btn.prevented {
    background: #dc3545;
}

/* å…¶ä»–æ¼”ç¤ºæ ·å¼ */
.context-demo {
    padding: 30px;
    text-align: center;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    user-select: none;
}

.context-demo.normal {
    background: #e3f2fd;
    border: 2px solid #2196f3;
}

.context-demo.prevented {
    background: #ffebee;
    border: 2px solid #f44336;
}

.key-input {
    flex: 1;
    padding: 8px 12px;
    border: 1px solid #ced4da;
    border-radius: 4px;
}

.key-input.normal {
    border-color: #007bff;
}

.key-input.prevented {
    border-color: #dc3545;
}

/* äº‹ä»¶æ•è·æ¼”ç¤º */
.capture-demo-wrapper {
    display: flex;
    justify-content: center;
    margin: 25px 0;
}

.capture-container {
    padding: 25px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.capture-container.outer {
    background: linear-gradient(135deg, #a29bfe, #6c5ce7);
    color: white;
    min-width: 350px;
    min-height: 250px;
}

.capture-container.middle {
    background: linear-gradient(135deg, #fd79a8, #e84393);
    color: white;
    min-width: 250px;
    min-height: 150px;
}

.capture-label {
    position: absolute;
    top: 10px;
    left: 15px;
    font-weight: bold;
    font-size: 0.9em;
    opacity: 0.9;
}

.capture-button {
    background: white;
    color: #333;
    border: none;
    padding: 12px 24px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.2s ease;
}

.capture-explanation {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-top: 20px;
}

.order-demo {
    margin-top: 15px;
}

.order-item {
    padding: 10px 15px;
    margin: 8px 0;
    border-radius: 5px;
}

.capture-order {
    background: #e3f2fd;
    border-left: 4px solid #2196f3;
}

.bubble-order {
    background: #fff3e0;
    border-left: 4px solid #ff9800;
}

/* äº‹ä»¶å§”æ‰˜æ¼”ç¤º */
.delegation-demo {
    background: #f8f9fa;
    padding: 25px;
    border-radius: 10px;
}

.todo-app {
    max-width: 600px;
    margin: 0 auto;
}

.todo-app h4 {
    color: #495057;
    text-align: center;
    margin-bottom: 20px;
}

.add-todo {
    display: flex;
    gap: 10px;
    margin-bottom: 25px;
}

.todo-input {
    flex: 1;
    padding: 10px 15px;
    border: 1px solid #ced4da;
    border-radius: 6px;
    font-size: 1em;
}

.add-btn {
    background: #28a745;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
}

.todo-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.todo-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px;
    margin: 8px 0;
    background: white;
    border-radius: 8px;
    border: 1px solid #dee2e6;
    transition: all 0.2s ease;
}

.todo-item:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.todo-text {
    flex: 1;
    font-size: 1em;
    color: #495057;
}

.todo-text.completed {
    text-decoration: line-through;
    color: #6c757d;
    opacity: 0.7;
}

.todo-actions {
    display: flex;
    gap: 10px;
}

.toggle-btn,
.delete-btn {
    background: none;
    border: 1px solid #dee2e6;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1em;
    transition: all 0.2s ease;
}

.toggle-btn:hover,
.delete-btn:hover {
    background: #f8f9fa;
}

.toggle-btn.active {
    background: #d4edda;
    border-color: #c3e6cb;
}

.delegation-info {
    margin-top: 25px;
    padding: 20px;
    background: white;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.delegation-info p {
    margin-bottom: 10px;
    font-weight: bold;
    color: #495057;
}

.delegation-info ul {
    margin-left: 20px;
}

.delegation-info li {
    margin: 5px 0;
    color: #6c757d;
}

/* æŠ€å·§æ€»ç»“ */
.tips-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
}

.tip-card {
    background: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    border: 1px solid #e1e8ed;
}

.tip-card h4 {
    color: #2c3e50;
    margin-bottom: 15px;
    font-size: 1.2em;
}

.tip-card ul {
    margin-left: 20px;
}

.tip-card li {
    margin: 8px 0;
    color: #666;
    line-height: 1.5;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .event-mechanism-guide {
        padding: 10px;
    }

    .guide-header {
        padding: 30px 15px;
    }

    .guide-header h1 {
        font-size: 2em;
    }

    .flow-diagram {
        flex-direction: column;
    }

    .phase {
        margin: 10px 0;
    }

    .comparison-demo {
        grid-template-columns: 1fr;
    }

    .code-comparison {
        grid-template-columns: 1fr;
    }

    .form-demo-row {
        grid-template-columns: 1fr;
    }

    .demo-row {
        flex-direction: column;
        gap: 15px;
    }

    .level-1 {
        min-width: auto;
        width: 100%;
    }

    .level-2,
    .level-3 {
        min-width: auto;
        width: 90%;
    }

    .capture-container.outer {
        min-width: auto;
        width: 100%;
    }

    .capture-container.middle {
        min-width: auto;
        width: 90%;
    }

    .tips-grid {
        grid-template-columns: 1fr;
    }

    .add-todo {
        flex-direction: column;
    }
}
</style>